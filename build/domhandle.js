// Generated by CoffeeScript 1.6.1
(function() {

  window.DOMHandle = (function() {

    function DOMHandle() {
      this.chatStatus = null;
      this.chatMainOutput = null;
      this.chatTextarea = null;
      this.pageHeader = this.getHeader();
      this.pageTitle = this.getTitle();
      this.pageBody = this.getBody();
      this.pageNavButton = this.getNavButton();
      this.pageCopyright = this.getCopyright();
      this.callbacks = {
        "submit": null
      };
      this.styles = {
        chatStatus: {
          "width": "100%",
          "padding": "7px",
          "text-align": "left",
          "background-color": "#fff"
        },
        chatMainOutput: {
          "height": "200px",
          "text-align": "left",
          "background-color": "#fff"
        },
        chatTextarea: {
          "font-size": "100%",
          "margin-top": "15px",
          "background-color": "#fff"
        }
      };
      this.bodyHTML = "<div id=\"chatStatus\"></div>\n<div id=\"chatMainOutput\"></div>\n<input type=\"text\" id=\"chatTextarea\">";
      this.messageAuthorHTML = "<div class=\"messageAuthor\"></div>";
      this.messageAuthorCSS = {
        "width": "100%",
        "border-color": "#ddd",
        "border-style": "solid",
        "padding": "7px 15px 3px 15px",
        "font-family": "Rockwell, KuristaSemibold, Arial",
        "font-size": "16px",
        "background-color": "#fff",
        "float": "left",
        "color": "#41b7d8"
      };
      this.messageContentHTML = "<div class=\"messageContent\"></div>";
      this.messageContentCSS = {
        "width": "100%",
        "padding": "3px 15px 8px 15px",
        "background-color": "#fff",
        "float": "left",
        "border-bottom": "1px solid #eee",
        "line-height": "120%"
      };
    }

    DOMHandle.prototype.initDOMChange = function() {
      var _this = this;
      this.pageHeader.html("SkolportalN 2.0 Instant Messaging Service");
      this.pageTitle.html("");
      this.pageBody.html("Body");
      this.pageNavButton.html("Chat");
      this.pageCopyright.html("Injected by Epoch2");
      this.pageBody.html(this.bodyHTML);
      this.chatStatus = $("#chatStatus");
      this.chatMainOutput = $("#chatMainOutput");
      this.chatTextarea = $("#chatTextarea");
      this.chatStatus.css(this.styles.chatStatus);
      this.chatMainOutput.css(this.styles.chatMainOutput);
      this.chatTextarea.css(this.styles.chatTextarea);
      this.chatStatus.html("Status goes here");
      this.chatTextarea.focus();
      return this.chatTextarea.keypress(function() {
        var callback, evt, _ref;
        if (event.keyCode === 13) {
          _ref = _this.callbacks;
          for (evt in _ref) {
            callback = _ref[evt];
            if (evt === "submit") {
              callback(_this.chatTextarea.val());
            }
          }
          return _this.chatTextarea.val("");
        }
      });
    };

    DOMHandle.prototype.getHeader = function() {
      return $("div.header");
    };

    DOMHandle.prototype.getTitle = function() {
      return $("div.title");
    };

    DOMHandle.prototype.getBody = function() {
      return $("div.body");
    };

    DOMHandle.prototype.getNavButton = function() {
      return $("a:contains(Resa)");
    };

    DOMHandle.prototype.getCopyright = function() {
      return $("#copyright");
    };

    DOMHandle.prototype.on = function(event, callback) {
      return this.callbacks[event] = callback;
    };

    DOMHandle.prototype.addMessageToPage = function(author, content) {
      var authorTag, contentTag;
      authorTag = $(this.messageAuthorHTML);
      authorTag.css(this.messageAuthorCSS);
      authorTag.html(author);
      contentTag = $(this.messageContentHTML);
      contentTag.css(this.messageContentCSS);
      contentTag.html(content);
      authorTag.appendTo(this.chatMainOutput);
      return contentTag.appendTo(this.chatMainOutput);
    };

    return DOMHandle;

  })();

}).call(this);
